<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>SAFEDRIVER EDUCATOIN - COURSE CALENDAR</title>

    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/style-course-calendar.css" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Sarabun&display=swap"
      rel="stylesheet"
    />
    <!-- script bootstrap -->
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>

    <!-- font awesome  -->
    <script
      src="https://kit.fontawesome.com/8f9e6c018f.js"
      crossorigin="anonymous"
    ></script>

    <!-- timeline link  -->
  </head>

  <body>
    <img src="pic/logo-sm.png" class="image1 position-absolute zindex99" />
    <img src="pic/logo_sm.png" class="image2 position-absolute zindex99 mb-1" />

    <!-- nav bar  -->
    <div class="nav1">
      <nav
        class="navbar navbar-expand-lg navbar-light bg-light text-center px-0 py-0 "
      >
        <div class="container">
          <div class="container text-center">
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarResponsive"
              aria-controls="navbarResponsive"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse pr-5" id="navbarResponsive">
              <a class="zindex999 navbar-brand text-center" href="index.html">
                <img class="zindex999-dpnone" src="pic/logo-white.png" alt="" />
              </a>

              <ul class="navbar-nav ml-auto ">
                <li class="nav-item  mr-1">
                  <a class="nav-link" href="index.html">HOME </a>
                </li>
                <li class="nav-item mr-1">
                  <a class="nav-link" href="visionforsafety.html"
                    >VISION FOR SAFETY</a
                  >
                </li>
                <li class="nav-item active mr-1">
                  <a class="nav-link" href="courses.html">COURSES</a>
                </li>
                <li class="nav-item mr-1">
                  <a class="nav-link" href="article.html">ARTICLE</a>
                </li>
                <li class="nav-item mr-1">
                  <a class="nav-link" href="company.html">COMPANY</a>
                </li>
                <li class="nav-item mr-1">
                  <a class="nav-link" href="contact.html">CONTACT</a>
                </li>
              </ul>
            </div>
            <li class="nav-item dropdown text-right list-style-type-n">
              <a
                class="dropdown-toggle"
                href="#"
                id="navbarDropdownMenuLink"
                role="button"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <img src="pic/thai.png" alt="" width="30" />
              </a>

              <ul class="dropdown-menu" role="menu" style="min-width:0">
                <li>
                  <a class="dropdown-item text-right" href="#">
                    <img src="pic/united-states.png" width="30" alt="" />
                  </a>
                </li>

                <li>
                  <a class="dropdown-item text-right" href="#">
                    <img src="pic/china.png" alt="" width="30" />
                  </a>
                </li>
              </ul>
            </li>
          </div>
        </div>
      </nav>
    </div>

    <div class="nav2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark2">
        <a class="navbar-brand" href="#"
          ><img class="" src="pic/logo-white.png" alt=""
        /></a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          class="collapse navbar-collapse text-right"
          id="navbarSupportedContent"
        >
          <ul class="navbar-nav  menubar">
            <li class="nav-item active mr-1">
              <a class="nav-link" href="index.html">HOME </a>
            </li>
            <li class="nav-item mr-1">
              <a class="nav-link" href="visionforsafety.html"
                >VISION FOR SAFETY</a
              >
            </li>
            <li class="nav-item mr-1">
              <a class="nav-link" href="courses.html">COURSES</a>
            </li>
            <li class="nav-item mr-1">
              <a class="nav-link" href="article.html">ARTICLE</a>
            </li>
            <li class="nav-item mr-1">
              <a class="nav-link" href="company.html">COMPANY</a>
            </li>
            <li class="nav-item mr-1">
              <a class="nav-link" href="contact.html">CONTACT</a>
            </li>
            <li class="nav-item dropdown list-style-type-n">
              <a
                class="dropdown-toggle"
                href="#"
                id="navbarDropdownMenuLink"
                role="button"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <img src="pic/thai.png" alt="" width="30" />
              </a>

              <ul class="dropdown-menu" role="menu" style="min-width:0">
                <li>
                  <a class="dropdown-item text-right" href="#">
                    <img src="pic/united-states.png" width="30" alt="" />
                  </a>
                </li>

                <li>
                  <a class="dropdown-item text-right" href="#">
                    <img src="pic/china.png" alt="" width="30" />
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    <!-- end nav bar -->

    <!-- hr line nav -->
    <hr class="btnav" />
    <!-- end hr line nav -->

    <!-- detail  -->
    <div class="detail">
      <div class="container">
        <section class="head-de">
          <h1 class="headtext pt-5">Course Calendar</h1>
        </section>
        <div class="calendar">
          <div class="calendar-content">
            <div class="calendar-container">
              <div class="calendar">
                <div class="year-header">
                  <span class="left-button" id="prev"> &lang; </span>
                  <span class="year" id="label"></span>
                  <span class="right-button" id="next"> &rang; </span>
                </div>
                <table class="months-table">
                  <tbody>
                    <tr class="months-row">
                      <td class="month">Jan</td>
                      <td class="month">Feb</td>
                      <td class="month">Mar</td>
                      <td class="month">Apr</td>
                      <td class="month">May</td>
                      <td class="month">Jun</td>
                      <td class="month">Jul</td>
                      <td class="month">Aug</td>
                      <td class="month">Sep</td>
                      <td class="month">Oct</td>
                      <td class="month">Nov</td>
                      <td class="month">Dec</td>
                    </tr>
                  </tbody>
                </table>

                <table class="days-table">
                  <td class="day">Sun</td>
                  <td class="day">Mon</td>
                  <td class="day">Tue</td>
                  <td class="day">Wed</td>
                  <td class="day">Thu</td>
                  <td class="day">Fri</td>
                  <td class="day">Sat</td>
                </table>
                <div class="frame">
                  <table class="dates-table">
                    <tbody class="tbody"></tbody>
                  </table>
                </div>
                <button class="button" id="add-button">Add Event</button>
              </div>
            </div>
            <div class="events-container"></div>
            <div class="dialog" id="dialog">
              <h2 class="dialog-header">Add New Event</h2>
              <form class="form" id="form">
                <div class="form-container" align="center">
                  <label class="form-label" id="valueFromMyButton" for="name"
                    >Event name</label
                  >
                  <input class="input" type="text" id="name" maxlength="36" />
                  <label class="form-label" id="valueFromMyButton" for="count"
                    >Number of people to invite</label
                  >
                  <input
                    class="input"
                    type="number"
                    id="count"
                    min="0"
                    max="1000000"
                    maxlength="7"
                  />
                  <input
                    type="button"
                    value="Cancel"
                    class="button"
                    id="cancel-button"
                  />
                  <input
                    type="button"
                    value="OK"
                    class="button"
                    id="ok-button"
                  />
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end detail  -->

    <!-- pre footer  -->
    <div class="prefooter">
      <div class="container footer1">
        <div class="col-12">
          <div class="row pt-3">
            <div class="col-lg-4 col-sm-6 text-lg-left text-center  mb-5">
              <a href="index.html"
                ><img class="mt-5" src="pic/logofooter.png" alt=""
              /></a>
            </div>

            <div
              class="col-lg-4 col-sm-6 text-lg-left text-center mt-5 mb-5 d-none d-md-block "
            >
              <div class="row">
                <div class="col-6 linknav text-left">
                  <a href="">HOME</a><br />
                  <a href="">VISION FOR SAFETY</a><br />
                  <a href="">COURSES</a>
                </div>
                <div class="col-6  linknav">
                  <a href="">ARTICLES</a><br />
                  <a href="">COMPANY</a><br />
                  <a href="">CONTACT</a>
                </div>
              </div>
            </div>

            <div
              class="col-lg-4 col-sm-6  col-md-12 text-lg-left text-center mt-5 mb-5 "
            >
              <p class=" font-weight-bold text-white">
                Safe Driver Education Company Limited
              </p>
              <p class="text-white">
                220/11 Superior Building Bond Street Road Muang Thong Thanee
                Bangpud, Pakkret, Nonthaburi, Thailand 11120
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- end pre footer  -->

    <!-- footer  -->
    <footer>
      <div class="container pt-1">
        <div class="col-12 mb-3">
          <div class="row ">
            <div class="col-lg-3 col-sm-6 text-lg-left text-center">
              <div class="icon">
                <a href="https://www.facebook.com/VisionForSafety/">
                  <h2 class="ft-social">
                    <i class=" fab fa-facebook-square"></i>
                  </h2>
                </a>

                <a href="https://www.facebook.com/VisionForSafety/">
                  <h2 class="ft-social">
                    <i class=" fab fa-line"></i>
                  </h2>
                </a>

                <a href="https://www.facebook.com/VisionForSafety/">
                  <h2 class="ft-social">
                    <i class=" fas fa-phone-square-alt"></i>
                  </h2>
                </a>
              </div>
            </div>

            <div class="col-lg col-sm-6 text-lg-left text-center">
              <p class="mt-5 text-bluesecondary">
                Copyright 2020 Safe Driver Education Company Limited. All rights
                reserved
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- end footer  -->

    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"
    ></script>
    <script src="app.js"></script>
    <script>
      $(document).ready(function() {
        var date = new Date();
        var today = date.getDate();
        // Set click handlers for DOM elements
        $(".right-button").click({ date: date }, next_year);
        $(".left-button").click({ date: date }, prev_year);
        $(".month").click({ date: date }, month_click);
        $("#add-button").click({ date: date }, new_event);
        // Set current month as active
        $(".months-row")
          .children()
          .eq(date.getMonth())
          .addClass("active-month");
        init_calendar(date);
        var events = check_events(
          today,
          date.getMonth() + 1,
          date.getFullYear()
        );
        show_events(events, months[date.getMonth()], today);
      });

      // Initialize the calendar by appending the HTML dates
      function init_calendar(date) {
        $(".tbody").empty();
        $(".events-container").empty();
        var calendar_days = $(".tbody");
        var month = date.getMonth();
        var year = date.getFullYear();
        var day_count = days_in_month(month, year);
        var row = $("<tr class='table-row'></tr>");
        var today = date.getDate();
        // Set date to 1 to find the first day of the month
        date.setDate(1);
        var first_day = date.getDay();
        // 35+firstDay is the number of date elements to be added to the dates table
        // 35 is from (7 days in a week) * (up to 5 rows of dates in a month)
        for (var i = 0; i < 35 + first_day; i++) {
          // Since some of the elements will be blank,
          // need to calculate actual date from index
          var day = i - first_day + 1;
          // If it is a sunday, make a new row
          if (i % 7 === 0) {
            calendar_days.append(row);
            row = $("<tr class='table-row'></tr>");
          }
          // if current index isn't a day in this month, make it blank
          if (i < first_day || day > day_count) {
            var curr_date = $("<td class='table-date nil'>" + "</td>");
            row.append(curr_date);
          } else {
            var curr_date = $("<td class='table-date'>" + day + "</td>");
            var events = check_events(day, month + 1, year);
            if (today === day && $(".active-date").length === 0) {
              curr_date.addClass("active-date");
              show_events(events, months[month], day);
            }
            // If this date has any events, style it with .event-date
            if (events.length !== 0) {
              curr_date.addClass("event-date");
            }
            // Set onClick handler for clicking a date
            curr_date.click(
              { events: events, month: months[month], day: day },
              date_click
            );
            row.append(curr_date);
          }
        }
        // Append the last row and set the current year
        calendar_days.append(row);
        $(".year").text(year);
      }

      // Get the number of days in a given month/year
      function days_in_month(month, year) {
        var monthStart = new Date(year, month, 1);
        var monthEnd = new Date(year, month + 1, 1);
        return (monthEnd - monthStart) / (1000 * 60 * 60 * 24);
      }

      // Event handler for when a date is clicked
      function date_click(event) {
        $(".events-container").show(250);
        $("#dialog").hide(250);
        $(".active-date").removeClass("active-date");
        $(this).addClass("active-date");
        show_events(event.data.events, event.data.month, event.data.day);
      }

      // Event handler for when a month is clicked
      function month_click(event) {
        $(".events-container").show(250);
        $("#dialog").hide(250);
        var date = event.data.date;
        $(".active-month").removeClass("active-month");
        $(this).addClass("active-month");
        var new_month = $(".month").index(this);
        date.setMonth(new_month);
        init_calendar(date);
      }

      // Event handler for when the year right-button is clicked
      function next_year(event) {
        $("#dialog").hide(250);
        var date = event.data.date;
        var new_year = date.getFullYear() + 1;
        $("year").html(new_year);
        date.setFullYear(new_year);
        init_calendar(date);
      }

      // Event handler for when the year left-button is clicked
      function prev_year(event) {
        $("#dialog").hide(250);
        var date = event.data.date;
        var new_year = date.getFullYear() - 1;
        $("year").html(new_year);
        date.setFullYear(new_year);
        init_calendar(date);
      }

      // Event handler for clicking the new event button
      function new_event(event) {
        // if a date isn't selected then do nothing
        if ($(".active-date").length === 0) return;
        // remove red error input on click
        $("input").click(function() {
          $(this).removeClass("error-input");
        });
        // empty inputs and hide events
        $("#dialog input[type=text]").val("");
        $("#dialog input[type=number]").val("");
        $(".events-container").hide(250);
        $("#dialog").show(250);
        // Event handler for cancel button
        $("#cancel-button").click(function() {
          $("#name").removeClass("error-input");
          $("#count").removeClass("error-input");
          $("#dialog").hide(250);
          $(".events-container").show(250);
        });
        // Event handler for ok button
        $("#ok-button")
          .unbind()
          .click({ date: event.data.date }, function() {
            var date = event.data.date;
            var name = $("#name")
              .val()
              .trim();
            var count = parseInt(
              $("#count")
                .val()
                .trim()
            );
            var day = parseInt($(".active-date").html());
            // Basic form validation
            if (name.length === 0) {
              $("#name").addClass("error-input");
            } else if (isNaN(count)) {
              $("#count").addClass("error-input");
            } else {
              $("#dialog").hide(250);
              console.log("new event");
              new_event_json(name, count, date, day);
              date.setDate(day);
              init_calendar(date);
            }
          });
      }

      // Adds a json event to event_data
      function new_event_json(name, count, date, day) {
        var event = {
          occasion: name,
          invited_count: count,
          year: date.getFullYear(),
          month: date.getMonth() + 1,
          day: day
        };
        event_data["events"].push(event);
      }

      // Display all events of the selected date in card views
      function show_events(events, month, day) {
        // Clear the dates container
        $(".events-container").empty();
        $(".events-container").show(250);
        console.log(event_data["events"]);
        // If there are no events for this date, notify the user
        if (events.length === 0) {
          var event_card = $("<div class='event-card'></div>");
          var event_name = $(
            "<div class='event-name'>There are no events planned for " +
              month +
              " " +
              day +
              ".</div>"
          );
          $(event_card).css({ "border-left": "10px solid #FF1744" });
          $(event_card).append(event_name);
          $(".events-container").append(event_card);
        } else {
          // Go through and add each event as a card to the events container
          for (var i = 0; i < events.length; i++) {
            var event_card = $("<div class='event-card'></div>");
            var event_name = $(
              "<div class='event-name'>" + events[i]["occasion"] + ":</div>"
            );
            var event_count = $(
              "<div class='event-count'>" +
                events[i]["invited_count"] +
                " Invited</div>"
            );
            if (events[i]["cancelled"] === true) {
              $(event_card).css({
                "border-left": "10px solid #FF1744"
              });
              event_count = $("<div class='event-cancelled'>Cancelled</div>");
            }
            $(event_card)
              .append(event_name)
              .append(event_count);
            $(".events-container").append(event_card);
          }
        }
      }

      // Checks if a specific date has any events
      function check_events(day, month, year) {
        var events = [];
        for (var i = 0; i < event_data["events"].length; i++) {
          var event = event_data["events"][i];
          if (
            event["day"] === day &&
            event["month"] === month &&
            event["year"] === year
          ) {
            events.push(event);
          }
        }
        return events;
      }

      // Given data for events in JSON format
      var event_data = {
        events: [
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10,
            cancelled: true
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10,
            cancelled: true
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10,
            cancelled: true
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10,
            cancelled: true
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10,
            cancelled: true
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10,
            cancelled: true
          },
          {
            occasion: " Repeated Test Event ",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 10
          },
          {
            occasion: " Test Event",
            invited_count: 120,
            year: 2017,
            month: 5,
            day: 11
          }
        ]
      };

      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December"
      ];
    </script>
  </body>
</html>
